(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{usb3:function(e,i,a){"use strict";a.r(i);var s=a("q1tI"),t=a.n(s);class l{constructor(e,i){this.pages=i,this.audioUrl=a("zrRf"),this.transitionMs=500,this.hasPrevPage=!1,this.hasNextPage=!0,this.leftHiddenPage=-3,this.leftOverleaf=-2,this.leftPage=-1,this.rightPage=0,this.rightOverleaf=1,this.rightHiddenPage=2,this._el("#pageFlip").element.innerHTML="\n      <div id=\"page-flip\"><span class='page-flip-loader'></span></div>\n    ",this.preloadPages(()=>{this.preloadAudio(),this.buildMarkup("#pageFlip"),this.renderPages(),this.addClickOnGrabbers()})}preloadPages(e){var i=[],a=0;this.pages.forEach((s,t)=>{i[t]=new Image,i[t].onload=(()=>{++a===this.pages.length&&e()}),i[t].src=this.pages[t]})}preloadAudio(){this.audio=new Audio,this.audio.preload="auto",this.audio.src=this.audioUrl}organizePages(e){var i=this._el(".page-left"),a=this._el(".page-right");"prev"===e?(this.leftHiddenPage<=-1&&i.addClass("reduce-to-left"),this.addPage(this.leftHiddenPage,".hidden-left-page"),this.addPage(this.leftOverleaf,".prev-page"),this.leftHiddenPage-=2,this.leftOverleaf-=2,this.leftPage-=2,this.rightPage-=2,this.rightOverleaf-=2,this.rightHiddenPage-=2):(this.rightHiddenPage>=this.pages.length&&a.addClass("reduce-to-right"),this.addPage(this.rightHiddenPage,".hidden-right-page"),this.addPage(this.rightOverleaf,".next-page"),this.leftHiddenPage+=2,this.leftOverleaf+=2,this.leftPage+=2,this.rightPage+=2,this.rightOverleaf+=2,this.rightHiddenPage+=2),this.leftOverleaf<=-1?(i.addClass("disable-click"),this.hasPrevPage=!1):(i.removeClass("disable-click"),this.hasPrevPage=!0),this.rightOverleaf>this.pages.length?(a.addClass("disable-click"),this.hasNextPage=!1):(a.removeClass("disable-click"),this.hasNextPage=!0),this.delayTransition(()=>{this.renderPages()})}renderPages(){this.addPage(this.leftPage,".page-left"),this.addPage(this.rightPage,".page-right")}addClickOnGrabbers(){var e=this._el(".page-left .page-grabber").element,i=this._el(".page-right .page-grabber").element;e.addEventListener("click",()=>{this.leftGrabberOnClick()},!1),i.addEventListener("click",()=>{this.rightGrabberOnClick()},!1),this._el(".page-left").addClass("disable-click")}leftGrabberOnClick(){if(this.hasPrevPage||this.isTurningPage){this.audio.play(),this.isTurningPage=!0;var e=this._el(".prev-page"),i=this._el(".left-brightness"),a=this._el(".hidden-left-page"),s=this._el(".page-grabber");e.addClass("turning-prev-page"),i.addClass("turning-right"),a.addClass("show-hidden-left-page"),s.addClass("hide-page-fold"),this.organizePages("prev"),this.delayTransition(()=>{e.removeClass("turning-prev-page"),i.removeClass("turning-right"),a.removeClass("show-hidden-left-page"),s.removeClass("hide-page-fold"),this._el(".page-left").removeClass("reduce-to-left"),this.reset()})}}rightGrabberOnClick(){if(this.hasNextPage||this.isTurningPage){this.audio.play(),this.isTurningPage=!0;var e=this._el(".next-page"),i=this._el(".right-brightness"),a=this._el(".hidden-right-page"),s=this._el(".page-grabber");e.addClass("turning-next-page"),i.addClass("turning-left"),a.addClass("show-hidden-right-page"),s.addClass("hide-page-fold"),this.organizePages("next"),this.delayTransition(()=>{e.removeClass("turning-next-page"),i.removeClass("turning-left"),a.removeClass("show-hidden-right-page"),s.removeClass("hide-page-fold"),this._el(".page-right").removeClass("reduce-to-right"),this.reset()})}}delayTransition(e){setTimeout(()=>{e()},this.transitionMs)}addPage(e,i){void 0!==this.pages[e]?this._el(i).element.style.backgroundImage='url("'+this.pages[e]+'")':this._el(i).element.style.backgroundImage=null}reset(){this.audio.pause(),this.audio.currentTime=0,this.isTurningPage=!1}buildMarkup(e){this._el("#page-flip").element.innerHTML='\n      <div class="pages-container">\n        <div class="hidden-left-page"></div>\n        <div class="left-brightness"></div>\n        <div class="prev-page"></div>\n        <div class="page-left">\n          <div class="page-grabber">\n            <div class="page-fold"></div>\n          </div>\n          <div class="page-middle"></div>\n        </div>\n        <div class="page-right">\n          <div class="page-middle"></div>\n          <div class="page-grabber">\n            <div class="page-fold"></div>\n          </div>\n        </div>\n        <div class="next-page"></div>\n        <div class="right-brightness"></div>\n        <div class="hidden-right-page"></div>\n      </div>\n    '}_el(e){return{element:document.querySelector(e),addClass:function(e){return this.element.classList.add(e),this},removeClass:function(e){return this.element.classList.remove(e),this}}}}var d,r,g=a("MuoO"),h=(d=Object(g["connect"])(e=>{var i=e.global;return{global:i}}),d(r=class extends s["Component"]{componentDidMount(){var e=this.props.location.query.articleId;console.log(e),this.props.dispatch({type:"global/fetchQK",payload:{articleId:e}}).then(()=>{var e=this.props.global.qkImages;new l("#pageFlip",e)})}render(){return t.a.createElement("div",null,t.a.createElement("div",{id:"pageFlip",style:{width:"100%"}}))}})||r);i["default"]=h},zrRf:function(e,i,a){e.exports=a.p+"static/page-flip.ac5e16b4.mp3"}}]);